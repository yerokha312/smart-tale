<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<!--    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>-->
<!--    <meta name="color-scheme" content="light dark"/>-->
<!--    <meta name="supported-color-schemes" content="light dark"/>-->
    <title>WebSocket Documentation</title>
    <style>
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            font-size: 90%;
            color: #c7254e;
            background-color: #f9f2f4;
            border-radius: 4px;
        }

        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
<h1>WebSocket Documentation</h1>
<p>To connect to the WebSocket endpoint, use <code>ws://host-name/ws</code></p>
<p>Subscribe to the channel <code>/user/{userId}/push</code> to receive personal notifications.</p>
<p>Subscribe to the channel <code>/org/{orgId}/push</code> to receive broadcasting notifications.</p>
<p>Message format varies depending on push-n type. E.g.</p>
<br>

<pre>{
    "sub": "Запрос о принятии заказа",
    "orderId": "3",
    "orderImg": "http://images.com/u/3mx4.jpg",
    "title": "Order",
    "orgId": "1",
    "orgName": "Organization",
    "logo": "http://logo.com/u/3mx4.jpg",
    "code": "?code=0RoSZpt96o7pocG0TIuX-A", // *this is for "confirm" submit
                                              button should be concatenated to confirm EP*
    "timestamp": "2024-05-19T09:39:23.608360Z"
}</pre>
<br>
<pre>{
    "email": "example@mail.com" // ignore this property
    "sub": "Приглашение в организацию",
    "orgId: "15",
    "orgName": "Some Organization",
    "logo": "http://logotype.org/934cpadci.jpg",
    "code": "?code=mdc903ocG48kwkwX", // code for button
    "timestamp": "2024-05-19T09:39:23.608360Z"
}
</pre>
<br>
<pre>{
    "sub": "Подтвержден заказ",
    "orderId": "3",
    "title": "Order",
    "key": "T-1-4",
    "authorId": "2",
    "authorName": "Test User",
    "authorAvatar": "http://avatars.com/u/3mx4.jpg",
    "timestamp": "2024-05-19T09:39:23.608360Z"
}</pre>
<br>
<pre>{
    "sub": "Статус заказа обновлен",
    "employeeId": "15", // belongs to whom made update
    "employeeName": "User Updated Order",
    "employeeAvatar": "http://avatars.com/u/3mx4.jpg",
    "taskId": "9534",
    "key": "T-2-82",
    "title": "Order title",
    "oldStatus": "NEW",
    "newStatus": "IN_PROGRESS",
    "timestamp": "2024-05-19T09:39:23.608360Z"
}
</pre>
<br>
<pre>{
    "sub": "Вас отстранили от заказа",
    "orderId": "45",
    "title": "Order title",
    "key": "T-1-3",
    "image": "http://img.ru/irucnaw.jpg",
    "status": "CHECKING",
    "timestamp": "2024-05-19T09:39:23.608360Z"
}
</pre>
<br>
<pre>{
    "sub": "Вас назначили на заказ",
    "orderId": "45",
    "title": "Order title",
    "key": "T-1-3",
    "image": "http://img.ru/irucnaw.jpg",
    "status": "CHECKING",
    "timestamp": "2024-05-19T09:39:23.608360Z"
}
</pre>
<br>
<pre>{
    "sub": "Ваша должность обновлена", // for user personally
    "posId": "25",
    "title": "Position title",
    "timestamp": "2024-05-19T09:39:23.608360Z"
}
</pre>
<br>
<pre>{
    "sub": "Должность была обновлена", // for org broadcasting
    "posId": "25",
    "title": "Position title",
    "timestamp": "2024-05-19T09:39:23.608360Z"
}
</pre>
<br>
<pre>{
    "sub": "Вы назначены на новую должность",
    "posId": "25",
    "title": "Position title",
    "email": "email@example.com" // ignore this property
    "timestamp": "2024-05-19T09:39:23.608360Z"
}
</pre>
</body>
</html>
